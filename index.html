<script>
const audio = document.getElementById('bgMusic');
const globe = document.getElementById('musicToggle');
const dropdown = document.getElementById('languageDropdown');
let canPlay = false;

document.body.addEventListener('click', () => {
  if (canPlay) return;
  canPlay = true;
  audio.src = 'Calli.mp3';
  audio.volume = 0.3;
  audio.play().catch(() => {});
}, { once: true });

globe.addEventListener('click', e => {
  e.stopPropagation();
  dropdown.classList.toggle('show');
});

document.addEventListener('click', e => {
  if (!dropdown.contains(e.target) && e.target !== globe) {
    dropdown.classList.remove('show');
  }
});

const translations = {
  ru: {
    nav_home:"Главная",
    nav_services:"Услуги",
    nav_contact:"Связаться с нами",
    hero_title_1:"Профессиональный",
    hero_title_2:"онлайн-переводчик",
    hero_subtitle:"Быстрые и точные переводы документов, видео и веб-страниц.",
    services_title:"Почему выбирают нас",
    services_subtitle:"Передовые технологии и международная команда специалистов",
    service_1_title:"Мгновенный перевод",
    service_1_desc:"Получайте переводы без задержек",
    service_2_title:"Безопасность",
    service_2_desc:"Ваши данные защищены современными протоколами шифрования",
    service_3_title:"Мобильная версия",
    service_3_desc:"Удобный доступ к переводам с любого устройства",
    service_4_title:"Перевод документов",
    service_4_desc:"Поддерживаем все форматы файлов",
    service_5_title:"Локализация сайтов и видео",
    service_5_desc:"Локализация сайтов, субтитры и озвучка видео",
    service_6_title:"Консьерж-сервис",
    service_6_desc:"Личный менеджер для срочных задач и комплексной поддержки",
    service_7_title:"Доставка документов",
    service_7_desc:"Курьерская доставка переведенных документов по адресу",
    contact_title:"Связаться с нами",
    contact_subtitle:"Есть вопросы? Наша команда готова помочь с любым запросом на перевод.",
    contact_email:"Email",
    contact_whatsapp:"WhatsApp и телефон",
    contact_hours:"Часы работы",
    contact_hours_text:"Онлайн 24/7",
    form_email:"Email",
    form_subject:"Тема",
    form_message:"Ваше сообщение",
    form_submit:"Отправить сообщение",
    footer_service:"Сервис",
    footer_tagline:"Мы переводим людей",
    footer_desc:"Профессиональные услуги перевода и локализации: документы, сайты, видео. Быстро и точно.",
    feedback_btn:"Отзывы",
    cookie_text:"Мы используем необходимые и аналитические cookie для улучшения работы сайта",
    cookie_accept:"Принять"
  },

  en: {
    nav_home:"Home",
    nav_services:"Services",
    nav_contact:"Contact us",
    hero_title_1:"Professional",
    hero_title_2:"online translator",
    hero_subtitle:"Fast and accurate translations of documents, video and web pages.",
    services_title:"Why choose us",
    services_subtitle:"Advanced technologies and international team of experts",
    service_1_title:"Instant translation",
    service_1_desc:"Get translations in real time without delays or waiting",
    service_2_title:"Security",
    service_2_desc:"Your data is protected with modern encryption protocols",
    service_3_title:"Mobile friendly",
    service_3_desc:"Convenient access to translations from any device",
    service_4_title:"Document translation",
    service_4_desc:"We support PDF, DOC, TXT and other file formats",
    service_5_title:"Websites and video localization",
    service_5_desc:"Localization for websites, subtitles and voice-over for video",
    service_6_title:"Concierge service",
    service_6_desc:"Personal manager for urgent tasks and turnkey support",
    service_7_title:"Documents delivery from door to door",
    service_7_desc:"Courier delivery of translated and notarized documents to your address",
    contact_title:"Contact us",
    contact_subtitle:"Have questions? Our team is ready to help with any translation request.",
    contact_email:"Email",
    contact_whatsapp:"WhatsApp and phone number",
    contact_hours:"Working hours",
    contact_hours_text:"Online 24/7",
    form_email:"Email",
    form_subject:"Subject",
    form_message:"Your message",
    form_submit:"Send message",
    footer_service:"Translation Service",
    footer_tagline:"We translate people",
    footer_desc:"Professional translation and localization services: documents, websites, video. Fast and accurate.",
    feedback_btn:"Feedback",
    cookie_text:"We use necessary and analytical cookies to improve the site",
    cookie_accept:"Accept"
  },

  de: {
    nav_home:"Startseite",
    nav_services:"Dienstleistungen",
    nav_contact:"Kontakt",
    hero_title_1:"Professioneller",
    hero_title_2:"Online-Übersetzer",
    hero_subtitle:"Schnelle und genaue Übersetzungen von Dokumenten, Videos und Webseiten.",
    services_title:"Warum uns wählen",
    services_subtitle:"Spitzentechnologien und ein internationales Team von Experten",
    service_1_title:"Sofortübersetzung",
    service_1_desc:"Erhalten Sie Übersetzungen in Echtzeit ohne Verzögerungen",
    service_2_title:"Sicherheit",
    service_2_desc:"Ihre Daten sind durch moderne Verschlüsselungsprotokolle geschützt",
    service_3_title:"Mobilfreundlich",
    service_3_desc:"Bequemer Zugang zu Übersetzungen von jedem Gerät",
    service_4_title:"Dokumentenübersetzung",
    service_4_desc:"Wir unterstützen PDF, DOC, TXT und andere Dateiformate",
    service_5_title:"Website- und Video-Lokalisierung",
    service_5_desc:"Lokalisierung für Websites, Untertitel und Sprachaufnahmen für Videos",
    service_6_title:"Concierge-Service",
    service_6_desc:"Persönlicher Manager für dringende Aufgaben und umfassende Unterstützung",
    service_7_title:"Dokumentenlieferung von Tür zu Tür",
    service_7_desc:"Kurierlieferung von übersetzten und beglaubigten Dokumenten an Ihre Adresse",
    contact_title:"Kontaktieren Sie uns",
    contact_subtitle:"Haben Sie Fragen? Unser Team ist bereit, bei jeder Übersetzungsanfrage zu helfen.",
    contact_email:"E-Mail",
    contact_whatsapp:"WhatsApp und Telefonnummer",
    contact_hours:"Arbeitszeiten",
    contact_hours_text:"Online 24/7",
    form_email:"E-Mail",
    form_subject:"Betreff",
    form_message:"Ihre Nachricht",
    form_submit:"Nachricht senden",
    footer_service:"Übersetzungsdienst",
    footer_tagline:"Wir übersetzen Menschen",
    footer_desc:"Professionelle Übersetzungs- und Lokalisierungsdienste.",
    feedback_btn:"Rückmeldung",
    cookie_text:"Wir verwenden notwendige und analytische Cookies zur Verbesserung der Website",
    cookie_accept:"Akzeptieren"
  },

  es: {
    nav_home:"Inicio",
    nav_services:"Servicios",
    nav_contact:"Contacto",
    hero_title_1:"Traductor",
    hero_title_2:"en línea profesional",
    hero_subtitle:"Traducciones rápidas y precisas de documentos, videos y páginas web.",
    services_title:"Por qué elegirnos",
    services_subtitle:"Tecnologías de vanguardia y un equipo internacional de especialistas",
    service_1_title:"Traducción instantánea",
    service_1_desc:"Obtenga traducciones en tiempo real sin demoras",
    service_2_title:"Seguridad",
    service_2_desc:"Sus datos están protegidos con protocolos modernos",
    service_3_title:"Compatible con móviles",
    service_3_desc:"Acceso desde cualquier dispositivo",
    service_4_title:"Traducción de documentos",
    service_4_desc:"Soportamos múltiples formatos",
    service_5_title:"Localización web y video",
    service_5_desc:"Subtítulos y doblaje",
    service_6_title:"Servicio de conserjería",
    service_6_desc:"Soporte personalizado",
    service_7_title:"Entrega de documentos",
    service_7_desc:"Entrega a domicilio",
    contact_title:"Contáctenos",
    contact_subtitle:"Estamos listos para ayudar.",
    contact_email:"Correo",
    contact_whatsapp:"WhatsApp",
    contact_hours:"Horario",
    contact_hours_text:"Online 24/7",
    form_email:"Correo",
    form_subject:"Asunto",
    form_message:"Mensaje",
    form_submit:"Enviar",
    footer_service:"Servicio",
    footer_tagline:"Traducimos personas",
    footer_desc:"Servicios profesionales de traducción.",
    feedback_btn:"Reseñas",
    cookie_text:"Utilizamos cookies necesarias y analíticas para mejorar el sitio",
    cookie_accept:"Aceptar"
  },

  pt: {
    nav_home:"Início",
    nav_services:"Serviços",
    nav_contact:"Contato",
    hero_title_1:"Tradutor",
    hero_title_2:"online profissional",
    hero_subtitle:"Traduções rápidas e precisas.",
    services_title:"Por que nos escolher",
    services_subtitle:"Equipe internacional",
    service_1_title:"Tradução instantânea",
    service_1_desc:"Sem atrasos",
    service_2_title:"Segurança",
    service_2_desc:"Dados protegidos",
    service_3_title:"Mobile",
    service_3_desc:"Compatível",
    service_4_title:"Documentos",
    service_4_desc:"Vários formatos",
    service_5_title:"Localização",
    service_5_desc:"Sites e vídeos",
    service_6_title:"Concierge",
    service_6_desc:"Suporte dedicado",
    service_7_title:"Entrega",
    service_7_desc:"Porta a porta",
    contact_title:"Contato",
    contact_subtitle:"Estamos prontos",
    contact_email:"Email",
    contact_whatsapp:"WhatsApp",
    contact_hours:"Horário",
    contact_hours_text:"Online 24/7",
    form_email:"Email",
    form_subject:"Assunto",
    form_message:"Mensagem",
    form_submit:"Enviar",
    footer_service:"Serviço",
    footer_tagline:"Nós traduzimos pessoas",
    footer_desc:"Serviços profissionais",
    feedback_btn:"Avaliações",
    cookie_text:"Usamos cookies necessários e analíticos para melhorar o site",
    cookie_accept:"Aceitar"
  },

  zh: {
    nav_home:"首页",
    nav_services:"服务",
    nav_contact:"联系我们",
    hero_title_1:"专业",
    hero_title_2:"在线翻译",
    hero_subtitle:"快速准确的翻译。",
    services_title:"为什么选择我们",
    services_subtitle:"国际团队",
    service_1_title:"即时翻译",
    service_1_desc:"无延迟",
    service_2_title:"安全",
    service_2_desc:"数据保护",
    service_3_title:"移动端",
    service_3_desc:"兼容",
    service_4_title:"文档翻译",
    service_4_desc:"支持多种格式",
    service_5_title:"本地化",
    service_5_desc:"网站和视频",
    service_6_title:"礼宾服务",
    service_6_desc:"专属支持",
    service_7_title:"文件送达",
    service_7_desc:"送到您手中",
    contact_title:"联系我们",
    contact_subtitle:"随时帮助",
    contact_email:"电子邮件",
    contact_whatsapp:"WhatsApp",
    contact_hours:"工作时间",
    contact_hours_text:"全天候",
    form_email:"电子邮件",
    form_subject:"主题",
    form_message:"信息",
    form_submit:"发送",
    footer_service:"翻译服务",
    footer_tagline:"我们翻译人们",
    footer_desc:"专业翻译服务",
    feedback_btn:"反馈",
    cookie_text:"我们使用必要和分析cookie",
    cookie_accept:"接受"
  },

  ar: {
    nav_home:"الصفحة الرئيسية",
    nav_services:"الخدمات",
    nav_contact:"اتصل بنا",
    hero_title_1:"مترجم",
    hero_title_2:"احترافي عبر الإنترنت",
    hero_subtitle:"ترجمات سريعة ودقيقة للمستندات والفيديو وصفحات الويب.",
    services_title:"لماذا تختارنا",
    services_subtitle:"تقنيات متقدمة وفريق دولي",
    service_1_title:"ترجمة فورية",
    service_1_desc:"بدون تأخير",
    service_2_title:"الأمان",
    service_2_desc:"بياناتك محمية",
    service_3_title:"متوافق مع الجوال",
    service_3_desc:"من أي جهاز",
    service_4_title:"ترجمة مستندات",
    service_4_desc:"كل الصيغ",
    service_5_title:"توطين المواقع والفيديو",
    service_5_desc:"ترجمة وتوطين",
    service_6_title:"خدمة الكونسيرج",
    service_6_desc:"مدير شخصي",
    service_7_title:"توصيل المستندات",
    service_7_desc:"حتى بابك",
    contact_title:"اتصل بنا",
    contact_subtitle:"نحن هنا للمساعدة",
    contact_email:"البريد الإلكتروني",
    contact_whatsapp:"واتساب",
    contact_hours:"ساعات العمل",
    contact_hours_text:"24/7",
    form_email:"البريد الإلكتروني",
    form_subject:"الموضوع",
    form_message:"رسالتك",
    form_submit:"إرسال",
    footer_service:"الخدمة",
    footer_tagline:"نترجم الناس",
    footer_desc:"خدمات ترجمة احترافية",
    feedback_btn:"التقييمات",
    cookie_text:"نستخدم ملفات تعريف الارتباط الضرورية والتحليلية لتحسين الموقع",
    cookie_accept:"قبول"
  }
};

const supportedLangs = ['ru','en','de','es','pt','zh','ar'];
let userLang = navigator.language || navigator.userLanguage;
userLang = userLang.split('-')[0];
let currentLang = localStorage.getItem('language') || (supportedLangs.includes(userLang) ? userLang : 'en');

function setLanguage(lang){
  currentLang = lang;
  localStorage.setItem('language', lang);
  document.documentElement.lang = lang;
  document.documentElement.dir = (lang === 'ar') ? 'rtl' : 'ltr';

  document.querySelectorAll('[data-translate]').forEach(el=>{
    const key = el.dataset.translate;
    if (translations[lang]?.[key]) el.textContent = translations[lang][key];
  });

  document.querySelectorAll('[data-translate-placeholder]').forEach(el=>{
    const key = el.dataset.translatePlaceholder;
    if (translations[lang]?.[key]) el.placeholder = translations[lang][key];
  });

  document.querySelectorAll('.language-option').forEach(opt=>{
    opt.classList.toggle('active', opt.dataset.lang === lang);
  });

  dropdown.classList.remove('show');
}

document.querySelectorAll('.language-option').forEach(opt=>{
  opt.addEventListener('click', e=>{
    e.stopPropagation();
    setLanguage(opt.dataset.lang);
  });
});

setLanguage(currentLang);

const contactOverlay = document.getElementById('contactOverlay');
const acceptBtn = document.getElementById('acceptCookies');

function checkCookieConsent() {
  const consent = localStorage.getItem('cookieConsent');
  if (consent === 'accepted') {
    contactOverlay.classList.remove('show');
  } else {
    contactOverlay.classList.add('show');
  }
}

acceptBtn.addEventListener('click', () => {
  localStorage.setItem('cookieConsent', 'accepted');
  contactOverlay.classList.remove('show');
});

checkCookieConsent();
</script>
